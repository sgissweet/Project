<!DOCTYPE html>
<html lang="en">

<head>
    <title>BookInfo</title>
    <!-- Include your CSS and other meta tags here -->
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="/static/style.css">
    <link rel="stylesheet" type="text/css" href="/static/mystyle.css">
    <link rel="stylesheet" type="text/css" href="/static/bookstyle.css">
    <!--fonts-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Thai:wght@100;200;300;400;500;600;700&display=swap" rel="stylesheet">
    
</head>

<body>
    <div id="book-info"></div>
    <!--หัวกระดาษ-->
    <div class="flexbox_menu">
        <div class="menu_banner_item">
            <a href="index.html"><img src="image/WriteARead_white.png" class="WriteARead_image"></a>
        </div>
        <div class="menu_banner_item">
            <a href="#"> <img class="ring_icon" src="image/ring_button_light.png" alt="Original Image"></a>
            <a href="#"> <img class="pen_icon" src="image/writing_button_light.png" alt="Original Image"></a>
            <a href="#"> <img class="user_icon" src="image/user_button_light.png" alt="Original Image"></a>
        </div>
    </div>

    <!--book info-->
    <div>
        <div class="book_flexbox">
            <div class="book_item">
                <img class="book_cover" src="image/shin_chan_cover.jfif" alt="book_cover" />
            </div>
            <div class="book_info_flexbox">
                <div class="book_info_item">
                    <div class="text-0">
                        <a id="genre"></a>
                    </div>
                </div>
                <div class="book_info_item">
                    <div class="book_title">
                        <a id="bookName"></a>
                    </div>
                </div>
                <div class="book_info_item">
                    <div class="text-0">
                        <a id="pseudonymInfo"></a>
                    </div>
                </div>
                <div class="book_info_item">
                    <div class="book_title">
                        <a id="prologueInfo"></a>
                    </div>
                </div>
            </div>
        </div>
        <div class="flexbox-3">
            <div class="item-3">
                <div class="info_title">prologue</div>
                <a id="prologueDisplay"></a>
            </div>
        </div>
        <div class="flexbox-3">
            <div class="item-3">
                <div class="info_title">writer information</div>
                <a>Pseudonym : </a>
                <a id="pseudonymDisplay"></a>
                <br>
                <a>Writer : </a>
                <a id="writer_username" ></a>
            </div>
        </div>
        <div class="flexbox-3">
            <div class="item-3">
                <div class="info_title">publish</div>
                <a>Latest Edit : </a>
                <a id="date_time"></a>
            </div>
        </div>
        <div class="flexbox-3">
            <div class="item-3">
                <a class="info_title">ตอนทั้งหมด</a>
                <div class="chapter_grid">
                    <p class="info_text text-3 text-2 chapter_content">บทที่</p>
                    <p class="info_text text-3 chapter_content">ชื่อตอน</p>
                    <img class="watch_icon chapter_content" src="image/eye.png" alt="watched" />
                    <p class="info_text text-4 chapter_content">แก้ไข</p>
                    <p class="info_text text-3 text-2 chapter_content">#1</p>
                    <a href="payment.html" class="text text-3 chapter_content">เมื่อไหร่จะทำ oop เส้ดดดด</a>
                    <p class="info_text text-4 chapter_content">152</p>
                    <p class="info_text text-4 chapter_content">12/5/2023</p>
                    <p class="info_text text-3 text-2 chapter_content">#2</p>
                    <a href="payment.html" class="text text-3 chapter_content">ขี้เกียจแล้ววววว</a>
                    <p class="info_text text-4 chapter_content">100</p>
                    <p class="info_text text-4 chapter_content">14/5/2023</p>
                </div>
            </div>
        </div>
    </div>
    <div class="flexbox-3">
        <div class="item-3">
            <div class="search_item">
                <form id="commentForm" >
                    <label for="chapter_id">Chapter no:</label>
                    <select id="chapter_id" name="chapter_id">
                        <option value="Shin_chan-1">Chapter 1</option>
                        <option value="Shin_chan-2">Chapter 2</option>
                    </select><br><br>
                    <!-- <input type="text" id="chapter_id" name="chapter_id" placeholder="chapter_id" required><br><br> -->
                    
                    <label for="username">Username:</label>
                    <input type="text" id="username" name="username" placeholder="username" required><br><br>
                    
                    <label for="context">Context:</label><br>
                    <textarea id="context" name="context" rows="4" cols="50" placeholder="context" required></textarea><br><br>
                    
                    <button type="submit" class="submit_button" >Submit</button>
                </form>
            </div>
        </div>
    </div>
    
    <!-- <div id="commentDataDiv"></div> -->
    <div class="flexbox-3">
        <div class="item-3">
            <div id = "context" class="info_title"></div>
            <div id = "user" class="comment-username-text"></div>
            <div id = "edit_date_time'" class="comment-date-text"></div>
            <div id = "chapter'" class="comment-chapter-text"></div>
        </div>
    </div>

    <footer class="bottom_footer">
        <a class="menu_item" href="https://www.readawrite.com/">ReadAWrite</a>
    </footer>

    <script>
        // Retrieve book information from sessionStorage
        const bookInfoString = sessionStorage.getItem('bookInfo');
        console.log(bookInfoString)

        // Check if bookInfoString is not null or undefined
        if (bookInfoString) {
            try {
                // Parse the JSON string to an object
                const bookInfo = JSON.parse(bookInfoString);

                console.log(bookInfo);

                // Check if the parsed object has the expected properties
                if (bookInfo && bookInfo.genre && bookInfo.name && bookInfo.pseudonym && bookInfo.prologue && bookInfo.writer_name && bookInfo.date_time) {
                    // Display book information in the HTML page
                    document.getElementById('genre').textContent = bookInfo.genre;
                    document.getElementById('bookName').textContent = bookInfo.name;
                    document.getElementById('prologueInfo').textContent = bookInfo.prologue;
                    document.getElementById('prologueDisplay').textContent = bookInfo.prologue;
                    document.getElementById('writer_username').textContent = bookInfo.writer_name;
                    document.getElementById('date_time').textContent = bookInfo.date_time;
                    document.getElementById('pseudonymInfo').textContent = bookInfo.pseudonym;
                    document.getElementById('pseudonymDisplay').textContent = bookInfo.pseudonym;
                } else {
                    console.error('bookInfo object is missing some properties.');
                }
            } catch (error) {
                console.error('Error parsing bookInfo JSON:', error);
            }
        }else {
            console.error('bookInfo is null or undefined.');
        }
        console.log("commentData",sessionStorage.getItem('commentData'));

        const comment_data_use = JSON.parse(sessionStorage.getItem('commentData'));

        console.log("comment_data_use",comment_data_use);

        if (comment_data_use) {
            // Display book information in the HTML page
            document.getElementById('user').textContent = comment_data_use.user || '';
            document.getElementById('chapter').textContent = comment_data_use.chapter || '';
            document.getElementById('edit_date_time').textContent = comment_data_use.date_time || '';
            document.getElementById('comment_context').textContent = comment_data_use.context || '';
        } else {
            console.error('comment_data object is missing or invalid.');
        }

    </script>
    <script src="/scripts/book_info.js"></script>
</body>

</html>